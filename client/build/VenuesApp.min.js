!function(){"use strict";angular.module("VenuesApp",["ui.router","slick"]).run(["$rootScope",function(e){e.$on("$stateChangeStart",function(e,a,n,s,t){$("#overlay").show()}),e.$on("$stateChangeSuccess",function(){$("#overlay").hide(),$("html, body").animate({scrollTop:0},0)})}])}(),function(){"use strict";function e(e,a,n){var s=this;s.venueFilter=!0,s.sortType="",s.searchType="",s.searchName="",s.venueLimit=5,s.loadMoreVenue=!1,s.toggleVenues=!1,s.venues=venuesData,n.getSearchVenueMap(s.venues),s.allMarkers=n.getAllMarkers(),s.duplicate=function(e,a){var n,s="";for(n=0;a>n;n+=1)s+=e+" ";return s},s.showMoreVenues=function(){s.venues.length==s.venueLimit&&(s.loadMoreVenue=!0),s.toggleVenues=!0;a(function(){s.toggleVenues=!1,s.venueLimit+=5},450)}}angular.module("VenuesApp").controller("VenuesCtrl",e),e.$inject=["$scope","$timeout","MapService"]}(),function(){"use strict";function e(){return{restrict:"A",link:a}}function a(e,a,n){function s(a){if(e.vm.allMarkers.length>0)for(var s=0;s<e.vm.allMarkers.length;s++)e.vm.allMarkers[s]._latlng.lat==n.data&&e.vm.allMarkers[s].openPopup()}a.on("mouseenter",s)}angular.module("VenuesApp").directive("activateMap",e)}(),function(){"use strict";function e(){function e(){return t}function n(e){if(e.length>1){var n=a(e),s=L.map("mapCanvas").setView([n[0].lat,n[0].lng],13);L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:18,id:"kpingul.cigh5xphi85bbvbm8zujsshq6",accessToken:"pk.eyJ1Ijoia3Bpbmd1bCIsImEiOiJjaWdoNXhxcTk4NHdvdHltNjlzb3FvdnR1In0.tHZ6g1UHifI0spL7JFSy4Q"}).addTo(s);for(var i=0;i<n.length;i++){var l='<div class="media"><div class="media-left"><a href=""><img class="media-object mapVenueImage" height="57"  src="'+n[i].img+'" alt="..."><span class ="mapVenueRating">'+n[i].rating+'</span></a></div><div class="media-body"><h4 class="media-heading" id="mapVenueMediaHeading"><span class="mapVenueTitle"><span>'+n[i].title+'</span></span> <small class="mapVenueStatus">('+n[i].status+')</small></h4><p><span class ="mapVenueAddress">'+n[i].address+' &#x2022;</span><small class="mapVenueType">'+n[i].type+'</small> &#x2022; <small class="mapVenueUrl"><a href="'+n[i].menu+'">view menu</a></small></p></div></div>';t.push(L.marker([n[i].lat,n[i].lng]).bindPopup(l,{maxWidth:300,minWidth:200}).addTo(s))}}else{var s=L.map("venue-canvas",{zoomControl:!1}).setView([e[0].lat,e[0].lng],14);L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:18,id:"kpingul.cigh5xphi85bbvbm8zujsshq6",accessToken:"pk.eyJ1Ijoia3Bpbmd1bCIsImEiOiJjaWdoNXhxcTk4NHdvdHltNjlzb3FvdnR1In0.tHZ6g1UHifI0spL7JFSy4Q"}).addTo(s),L.marker([e[0].lat,e[0].lng]).bindPopup(e[0].title).addTo(s),s.dragging.disable(),s.touchZoom.disable(),s.doubleClickZoom.disable(),s.scrollWheelZoom.disable(),s.tap&&s.tap.disable()}}var s={getSearchVenueMap:n,getAllMarkers:e},t=[];return s}function a(e){var a=[];return e.map(function(e,n){a.push({id:e.venue.id,type:e.venue.categories[0].name,address:e.venue.location.address,menu:e.venue.menu?e.venue.menu.url:"",rating:e.venue.rating,status:e.venue.hours?e.venue.hours.status:"",img:e.venue.categories[0].icon.prefix+"bg_32"+e.venue.categories[0].icon.suffix,title:e.venue.name,lat:e.venue.location.lat,lng:e.venue.location.lng})}),a}angular.module("VenuesApp").factory("MapService",e)}();